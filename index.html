<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Protótipo Triagem ACS — Qualificadores Refinados</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="app">
  <header>
    <div style="width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--primary),#1992ff);display:flex;align-items:center;justify-content:center;color:white;font-weight:700">ACS</div>
    <div>
      <h1>Assistente de Triagem — Protótipo</h1>
      <div class="small">Escolha demografia, fatores de risco, sintomas (+detalhes) e ajuste a intensidade.</div>
    </div>
  </header>

  <div class="tabs">
    <div class="tab active" data-tab="triage">Triagem</div>
    <div class="tab" data-tab="engine">Motor de Inferência</div>
    <div class="tab" data-tab="rules">Regras / Doenças</div>
  </div>

  <div class="main">
    <div class="panel">
      
      <div id="triage" class="tab-content active">
        <div class="chat">
          <div class="conversation" id="conversation" aria-live="polite"></div>

          <div style="margin-top:6px">
            
            <div style="display:flex;gap:8px;margin-bottom:10px;
 align-items: flex-end;">
              <div style="flex: 0.5;
 min-width: 130px;">
                <label class="small">Faixa Etária</label>
                <select id="faixa_etaria">
                  <option value="0-18">0 a 18 anos</option>
                  <option value="19-23">19 a 23 anos</option>
                  <option 
 value="24-28">24 a 28 anos</option>
                  <option value="29-33" selected>29 a 33 anos</option>
                  <option value="34-38">34 a 38 anos</option>
                  <option value="39-43">39 a 43 anos</option>
                  <option value="44-48">44 a 48 anos</option>
        
                   <option value="49-53">49 a 53 anos</option>
                  <option value="54-58">54 a 58 anos</option>
                  <option value="59+">59 anos ou mais</option>
                </select>
              </div>
            
               <div style="width:140px">
                <label class="small">Sexo</label>
                <select id="genero">
                  <option value="f">Feminino</option>
                  <option value="m">Masculino</option>
                        
                   </select>
              </div>
              
              <div style="flex:1"></div> 

              <div style="display:flex;
 gap: 8px; flex-shrink: 0;">
                <button class="btn-primary" id="btnNext">Avaliar triagem</button>
                <button class="btn-ghost" id="btnReset">Reiniciar</button>
              </div>
            </div>

            <label class="small">Fatores de Risco (Comorbidades)</label>
            <div class="risk-factor-grid">
     
               <div class="risk-factor-item">
                <input type="checkbox" id="chk_fumante"><label for="chk_fumante">Fumante</label>
              </div>
              <div class="risk-factor-item">
                <input type="checkbox" id="chk_hipertenso"><label for="chk_hipertenso">Hipertenso(a)</label>
              </div>
         
               <div class="risk-factor-item">
                <input type="checkbox" id="chk_diabetico"><label for="chk_diabetico">Diabético(a)</label>
              </div>
              <div class="risk-factor-item">
                <input type="checkbox" id="chk_obeso"><label for="chk_obeso">Obesidade</label>
              </div>
             
               <div class="risk-factor-item">
                <input type="checkbox" id="chk_asmatico"><label for="chk_asmatico">Asmático(a)</label>
              </div>
              <div class="risk-factor-item">
                <input type="checkbox" id="chk_gestante"><label for="chk_gestante">Gestante</label>
              </div>
            </div>

     
             <label class="small" style="margin-top:4px;
 display: block;">Sintomas (marque, ajuste intensidade, clique [+] para detalhes)</label>
            <div class="symptom-grid" id="symptoms"></div>

          </div>
        </div>
      </div>

      <div id="engine" class="tab-content">
        <h3 style="margin-top:0">Motor de Inferência — Logs</h3>
        <div class="muted small" style="margin-bottom:10px">Mostra como cada doença foi avaliada (sintomas, intensidade, demografia, fatores de risco, qualificadores).</div>
        <div>
  
           <h4>Dados atuais</h4>
          <pre id="rawData">{}</pre>
        </div>
        <div style="margin-top:10px">
          <h4>Logs detalhados</h4>
          <div id="engineLog" style="max-height:420px;overflow:auto;background:#fbfdff;padding:8px;border-radius:8px"></div>
        </div>
      </div>

      <div id="rules" class="tab-content">
        <h3 style="margin-top:0">Doenças / Regras</h3>
       
         <div class="muted small" style="margin-bottom:10px">Lista de doenças (48) com sintomas-chave.
         Clique para ver detalhes.</div>
        <div class="rules-list panel" id="rulesList"></div>
      </div>
    </div>

    <div class="right-col">
      <div class="panel">
        <h3 style="margin:8px 0">Resultados</h3>
        <div class="small muted">Lista de doenças ordenada por compatibilidade (probabilidade estimada).</div>
        <div style="height:12px"></div>
        <div id="results" class="result-list"></div>
        <div style="height:12px"></div>
        <div 
 style="display:flex;gap:8px;align-items:center;justify-content:space-between">
          <div class="small muted">Última triagem: <span id="lastSummary">nenhuma</span></div>
          <div><button id="exportBtn" class="btn-ghost">Exportar (JSON)</button></div>
        </div>
      </div>

      <div style="height:12px"></div>

      <div class="panel">
        <h4 style="margin:8px 0">Resumo rápido</h4>
        <div class="small muted">Prioridade clínica calculada com base nas doenças acionadas e intensidade da dor.</div>
        <div style="height:12px"></div>
   
           <div id="priorityCard" class="dcard info">
          <div style="display:flex;flex-direction:column">
            <div style="font-weight:700" id="priorityLabel">Sem dados</div>
            <div class="muted small" id="priorityDesc">Realize uma triagem para ver o resultado</div>
          </div>
          <div style="text-align:right">
            <div><span id="priorityBadge" class="badge info">—</span></div>
         
           </div>
        </div>
      </div>

      <footer class="small muted" style="margin-top:10px">
        Protótipo para validação.
 Não substitui avaliação clínica. Use regras validadas por profissionais antes do uso em produção.
       </footer>
    </div>
  </div>
</div>

<script src="data.js"></script>
<script src="app.js"></script>

</body>
</html>
